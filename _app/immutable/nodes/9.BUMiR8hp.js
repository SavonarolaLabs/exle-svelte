import{a as n,n as Pa,t as _,b as u,c as Q}from"../chunks/CHYGmSWW.js";import"../chunks/BJStuUVA.js";import{p as ba,f as F,s as r,t as g,i as wa,g as e,r as t,e as G,a6 as U,$ as f,a7 as V,at as ma,a4 as ca,a5 as Ma}from"../chunks/DDT3yhNO.js";import{e as Ya,s as l}from"../chunks/CnOWsFPg.js";import{i as d,s as Oa,a as _a}from"../chunks/c2kj6KWu.js";import{i as ka}from"../chunks/Dt8r7yW-.js";import{p as qa}from"../chunks/DSmJ7bpU.js";import{a as ga,s as M,f as za,b as Za,r as Ea}from"../chunks/C5QJODxi.js";import{t as C}from"../chunks/Dml5gRIG.js";import{b as xa}from"../chunks/BvXEL6tT.js";import{p as Ha}from"../chunks/CMcKEpMF.js";import{C as Ja,I as Ka,T as Na}from"../chunks/DJ-wJdET.js";import{B as ya}from"../chunks/BmbBp3LA.js";import{b as Qa}from"../chunks/CoGSG1dU.js";import{g as Ua}from"../chunks/DNYeLiB7.js";import{s as ha}from"../chunks/CcncvWVe.js";const Va=!1,Ie=Object.freeze(Object.defineProperty({__proto__:null,prerender:Va},Symbol.toStringTag,{value:"Module"}));var Xa=Pa('<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.9997 29.3332C8.63588 29.3332 2.66634 23.3636 2.66634 15.9998C2.66634 8.63604 8.63588 2.6665 15.9997 2.6665C23.3635 2.6665 29.333 8.63604 29.333 15.9998C29.333 23.3636 23.3635 29.3332 15.9997 29.3332Z" stroke="currentColor" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17.6797 20.7068L12.9864 16.0001L17.6797 11.2935" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>');function ae(W){var y=Xa();n(W,y)}var ee=u('<span class="flex items-center gap-1 font-semibold text-green-500"><!> Ready for withdrawal</span>'),te=u('<span class="font-normal"> </span>'),re=u('<div class="mb-4 mt-10 text-xl font-medium">Withdraw funds</div> <div class="mb-10">Your loan has been fully funded and you can withdraw it now.</div>',1),ne=u("<div>You can help fund this loan. Solofund loans can only be fully funded by one person.</div>"),se=u("<div>You can help fund this loan partially or fully.</div>"),oe=u('<input id="interest-rate" type="number" readonly="" class=" w-full rounded-xl border-2 border-[#e5e5eb] bg-transparent dark:border-dark-border">'),ie=u('<input id="interest-rate" type="number" class=" w-full rounded-xl border-2 border-[#e5e5eb] bg-transparent dark:border-dark-border">'),le=u('<div class="mb-4 mt-10 text-xl font-medium">Fund this loan</div> <!> <div class="mb-2 mt-8">Amount</div> <div class="relative mb-10 w-full"><!> <span class="absolute inset-y-0 right-0 flex items-center px-4"> </span></div>',1),de=u('<!> <!> <div class="mt-6 text-xs font-thin">By clicking on <!> button, you agree to our <a class="underline">terms of service</a>.</div>',1),pe=u('<div class="mb-8 mt-10 max-xl:px-4"><button><!></button></div> <div class="flex max-xl:flex-col max-xl:px-4 xl:gap-20"><div class="xl:w-1/2"><div class="mb-2 flex items-center justify-between text-xs font-thin"><div><span> </span> <h3 class="mb-3 text-xl font-medium"> </h3></div> <span class="rounded-md bg-gray-100 px-2 py-[4px] text-sm dark:bg-dark-gray"> </span></div> <p class="mb-5 line-clamp-4 h-[90px] overflow-hidden text-sm font-light leading-relaxed"> </p> <p class="font-thin">Borrower:</p> <p class="font-thin"> </p> <ul class="my-5 space-y-4 text-sm"><li class="flex items-end gap-2"><!> <span class="font-medium"> </span> <span class="text-thin text-xs">Repayment Period</span></li> <li class="flex items-center gap-2"><!> <span class="font-medium"> </span> <span class="text-thin text-xs">Interest Rate</span></li></ul></div> <div class="mb-5 xl:w-1/2"><div class="mb-2 flex items-center justify-between text-sm"><span class="font-thin"><!></span> <span class="text-lg font-semibold"> </span></div> <div class="h-[10px] w-full overflow-hidden rounded-full bg-[#0001] dark:bg-[#fff1]"><div class="h-full"></div></div> <div class="mt-2 flex items-center justify-between text-sm"><span> <!></span> <!></div> <!></div></div>',1);function ve(W,y){ba(y,!1);let a=Ha(y,"loan",12),m=V("");function h(){history.length>1?history.back():Ua("/")}function b(s){return s.loanType=="Solofund"&&!s.isReadyForWithdrawal&&s.phase==="loan"&&s.daysLeft>0}async function w(){if(a().isReadyForWithdrawal){console.log("Withdrawing loan:",a().loanId);return}if(a().phase==="loan"){za(a().loanId),console.log(`Funding loan: ${a().loanId} with amount: ${f(m)} ${a().fundingToken}`);return}if(a().phase==="repayment"){Za(a().loanId,f(m)),console.log(`Repaying loan: ${a().loanId} with amount: ${f(m)} ${a().fundingToken}`);return}}ka();var S=pe(),B=F(S),c=e(B),A=e(c);ae(A),t(c),t(B);var D=r(B,2),j=e(D),k=e(j),Y=e(k),O=e(Y),Ra=e(O);g(()=>l(Ra,`Loan ID: ${ha(a().loanId)??""}`)),t(O);var X=r(O,2),$a=e(X,!0);t(X),t(Y);var aa=r(Y,2),La=e(aa,!0);t(aa),t(k);var q=r(k,2),Ta=e(q,!0);t(q);var z=r(q,4),Ia=e(z,!0);g(()=>l(Ia,ha(a().creator))),t(z);var ea=r(z,2),Z=e(ea),ta=e(Z);Ja(ta);var ra=r(ta,2),Ca=e(ra,!0);t(ra),G(2),t(Z);var na=r(Z,2),sa=e(na);Ka(sa);var oa=r(sa,2),Fa=e(oa,!0);t(oa),G(2),t(na),t(ea),t(j);var ia=r(j,2),E=e(ia),H=e(E),Wa=e(H);d(Wa,()=>a().phase=="loan",s=>{var o=_("Funding Goal:");n(s,o)},s=>{var o=_("Total Repayment:");n(s,o)}),t(H);var la=r(H,2),Sa=e(la);t(la),t(E);var J=r(E,2),P=e(J);t(J);var K=r(J,2),R=e(K),da=e(R),Ba=r(da);d(Ba,()=>a().phase=="loan",s=>{var o=_("funded");n(s,o)},s=>{var o=_("repaid");n(s,o)}),t(R);var ja=r(R,2);d(ja,()=>a().isReadyForWithdrawal,s=>{var o=ee(),$=e(o);Na($),G(),t(o),n(s,o)},s=>{var o=te(),$=e(o);t(o),g(()=>l($,`${a().daysLeft??""} Days Left`)),n(s,o)}),t(K);var Ga=r(K,2);d(Ga,()=>!a().isRepayed&&!(a().phase=="repayment"&&a().daysLeft==0),s=>{var o=de(),$=F(o);d($,()=>a().isReadyForWithdrawal,p=>{var v=re();G(2),n(p,v)},p=>{var v=le(),L=r(F(v),2);d(L,()=>a().loanType=="Solofund",x=>{var i=ne();n(x,i)},x=>{var i=se();n(x,i)});var T=r(L,4),I=e(T);d(I,()=>b(a()),x=>{var i=oe();ga(i),g(()=>M(i,"placeholder",a().loanType=="Solofund"?a().fundingGoal:"")),xa(i,()=>a().fundingGoal,N=>a(a().fundingGoal=N,!0)),n(x,i)},x=>{var i=ie();ga(i),g(()=>M(i,"placeholder",a().loanType=="Solofund"?a().fundingGoal:"")),xa(i,()=>f(m),N=>U(m,N)),n(x,i)});var ua=r(I,2),Da=e(ua,!0);t(ua),t(T),g(()=>l(Da,a().fundingToken)),n(p,v)});var pa=r($,2);d(pa,()=>a().isReadyForWithdrawal,p=>{ya(p,{onClick:w,label:"Withdraw loan",variant:"primary",w100:!0})},p=>{var v=ma(()=>a().phase=="loan"?"Fund the loan":"Repay the loan"),L=ma(()=>!b(a())&&(!f(m)||a().daysLeft==0));ya(p,{onClick:w,get label(){return f(v)},variant:"primary",get disabled(){return f(L)},w100:!0})});var va=r(pa,2),fa=r(e(va));d(fa,()=>a().isReadyForWithdrawal,p=>{var v=_("“Withdraw loan”");n(p,v)},p=>{var v=Q(),L=F(v);d(L,()=>a().phase=="loan",T=>{var I=_("“Fund the loan”");n(T,I)},T=>{var I=_("“Repay the loan”");n(T,I)},!0),n(p,v)});var Aa=r(fa,2);M(Aa,"href",`${Qa??""}/tos`),G(),t(va),n(s,o)}),t(ia),t(D),g(()=>{l($a,a().loanTitle),l(La,a().loanType),l(Ta,a().loanDescription),l(Ca,a().repaymentPeriod),l(Fa,a().interestRate),l(Sa,`${a().fundingGoal??""} ${a().fundingToken??""}`),M(P,"style",`width: ${a().fundedPercentage??""}%`),C(P,"bg-gray-500",a().daysLeft==0||a().isRepayed),C(P,"bg-green-400",a().phase=="loan"&&a().daysLeft>0&&!a().isRepayed),C(P,"bg-indigo-600",a().phase=="repayment"&&a().daysLeft>0&&!a().isRepayed),C(R,"text-gray-500",a().daysLeft==0||a().isRepayed),C(R,"text-green-500",a().phase=="loan"&&a().daysLeft>0&&!a().isRepayed),C(R,"text-indigo-600",a().phase=="repayment"&&a().daysLeft>0&&!a().isRepayed),l(da,`${a().fundedAmount??""} `)}),Ya("click",c,h),n(W,S),wa()}function Ce(W,y){ba(y,!1);const a=Oa(),m=()=>_a(qa,"$page",a),h=()=>_a(Ea,"$repayments",a);let b=V({}),w=V();ca(()=>m(),()=>{U(w,m().params.id)}),ca(()=>(h(),f(w)),()=>{U(b,h().find(c=>c.loanId===f(w)))}),Ma(),ka();var S=Q(),B=F(S);d(B,()=>f(b),c=>{ve(c,{get loan(){return f(b)}})},c=>{var A=Q(),D=F(A);d(D,()=>h().length>0,j=>{var k=_();g(()=>l(k,`${h().length??""}
	Loan not found.`)),n(j,k)},null,!0),n(c,A)}),n(W,S),wa()}export{Ce as component,Ie as universal};
