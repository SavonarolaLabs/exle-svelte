import{a as n,n as Oa,t as _,b as m,c as X}from"../chunks/CHYGmSWW.js";import"../chunks/BJStuUVA.js";import{p as ka,f as T,s as r,t as g,i as $a,g as e,r as t,e as B,a6 as aa,$ as v,a7 as ea,at as V,a4 as ha,a5 as qa}from"../chunks/DDT3yhNO.js";import{e as za,s as l}from"../chunks/CnOWsFPg.js";import{s as Ra,i as p,a as ta}from"../chunks/c2kj6KWu.js";import{i as La}from"../chunks/Dt8r7yW-.js";import{p as Za}from"../chunks/Cnuv9tCa.js";import{a as xa,s as P,f as Ea,b as Ha,c as Ja,r as Ka}from"../chunks/vgZ61sMA.js";import{t as L}from"../chunks/Dml5gRIG.js";import{b as ya}from"../chunks/BvXEL6tT.js";import{p as Na}from"../chunks/CMcKEpMF.js";import{C as Qa,I as Ua,T as Va}from"../chunks/DJ-wJdET.js";import{B as ba}from"../chunks/DSoivAhp.js";import{b as Xa}from"../chunks/esaYrOwZ.js";import{g as ae}from"../chunks/B9dQr-Qq.js";import{s as wa}from"../chunks/CcncvWVe.js";const ee=!1,We=Object.freeze(Object.defineProperty({__proto__:null,prerender:ee},Symbol.toStringTag,{value:"Module"}));var te=Oa('<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.9997 29.3332C8.63588 29.3332 2.66634 23.3636 2.66634 15.9998C2.66634 8.63604 8.63588 2.6665 15.9997 2.6665C23.3635 2.6665 29.333 8.63604 29.333 15.9998C29.333 23.3636 23.3635 29.3332 15.9997 29.3332Z" stroke="currentColor" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17.6797 20.7068L12.9864 16.0001L17.6797 11.2935" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>');function re(I){var x=te();n(I,x)}var ne=m('<span class="flex items-center gap-1 font-semibold text-green-500"><!> Ready for withdrawal</span>'),se=m('<span class="font-normal"> </span>'),oe=m('<div class="mb-4 mt-10 text-xl font-medium">Withdraw funds</div> <div class="mb-10">Your loan has been fully funded and you can withdraw it now.</div>',1),de=m("<div>You can help fund this loan. Solofund loans can only be fully funded by one person.</div>"),ie=m("<div>You can help fund this loan partially or fully.</div>"),le=m('<input id="interest-rate" type="number" readonly="" class=" w-full rounded-xl border-2 border-[#e5e5eb] bg-transparent dark:border-dark-border">'),pe=m('<input id="interest-rate" type="number" class=" w-full rounded-xl border-2 border-[#e5e5eb] bg-transparent dark:border-dark-border">'),ve=m('<div class="mb-4 mt-10 text-xl font-medium">Fund this loan</div> <!> <div class="mb-2 mt-8">Amount</div> <div class="relative mb-10 w-full"><!> <span class="absolute inset-y-0 right-0 flex items-center px-4"> </span></div>',1),fe=m('<!> <!> <div class="mt-6 text-xs font-thin">By clicking on <!> button, you agree to our <a class="underline">terms of service</a>.</div>',1),ue=m('<div class="mb-8 mt-10 max-xl:px-4"><button><!></button></div> <div class="flex max-xl:flex-col max-xl:px-4 xl:gap-20"><div class="xl:w-1/2"><div class="mb-2 flex items-center justify-between text-xs font-thin"><div><span> </span> <h3 class="mb-3 text-xl font-medium"> </h3></div> <span class="rounded-md bg-gray-100 px-2 py-[4px] text-sm dark:bg-dark-gray"> </span></div> <p class="mb-5 line-clamp-4 h-[90px] overflow-hidden text-sm font-light leading-relaxed"> </p> <p class="font-thin">Borrower:</p> <p class="font-thin"> </p> <ul class="my-5 space-y-4 text-sm"><li class="flex items-end gap-2"><!> <span class="font-medium"> </span> <span class="text-thin text-xs">Repayment Period</span></li> <li class="flex items-center gap-2"><!> <span class="font-medium"> </span> <span class="text-thin text-xs">Interest Rate</span></li></ul></div> <div class="mb-5 xl:w-1/2"><div class="mb-2 flex items-center justify-between text-sm"><span class="font-thin"><!></span> <span class="text-lg font-semibold"> </span></div> <div class="h-[10px] w-full overflow-hidden rounded-full bg-[#0001] dark:bg-[#fff1]"><div class="h-full"></div></div> <div class="mt-2 flex items-center justify-between text-sm"><span> <!></span> <!></div> <!></div></div>',1);function me(I,x){ka(x,!1);const j=Ra(),G=()=>ta(Ja,"$change_address",j);let a=Na(x,"loan",12),u=ea("");function C(){history.length>1?history.back():ae("/")}function F(s){return s.loanType=="Solofund"&&!s.isReadyForWithdrawal&&s.phase==="loan"&&s.daysLeft>0}async function A(){if(a().isReadyForWithdrawal){console.log("Withdrawing loan:",a().loanId);return}if(a().phase==="loan"){Ea(a().loanId),console.log(`Funding loan: ${a().loanId} with amount: ${v(u)} ${a().fundingToken}`);return}if(a().phase==="repayment"){Ha(a().loanId,v(u)),console.log(`Repaying loan: ${a().loanId} with amount: ${v(u)} ${a().fundingToken}`);return}}La();var c=ue(),y=T(c),W=e(y),M=e(W);re(M),t(W),t(y);var S=r(y,2),Y=e(S),O=e(Y),q=e(O),z=e(q),Ta=e(z);g(()=>l(Ta,`Loan ID: ${wa(a().loanId)??""}`)),t(z);var ra=r(z,2),Ia=e(ra,!0);t(ra),t(q);var na=r(q,2),Ca=e(na,!0);t(na),t(O);var Z=r(O,2),Fa=e(Z,!0);t(Z);var E=r(Z,4),Wa=e(E,!0);g(()=>l(Wa,wa(a().creator))),t(E);var sa=r(E,2),H=e(sa),oa=e(H);Qa(oa);var da=r(oa,2),Sa=e(da,!0);t(da),B(2),t(H);var ia=r(H,2),la=e(ia);Ua(la);var pa=r(la,2),Ba=e(pa,!0);t(pa),B(2),t(ia),t(sa),t(Y);var va=r(Y,2),J=e(va),K=e(J),ja=e(K);p(ja,()=>a().phase=="loan",s=>{var o=_("Funding Goal:");n(s,o)},s=>{var o=_("Total Repayment:");n(s,o)}),t(K);var fa=r(K,2),Ga=e(fa);t(fa),t(J);var N=r(J,2),D=e(N);t(N);var Q=r(N,2),b=e(Q),ua=e(b),Aa=r(ua);p(Aa,()=>a().phase=="loan",s=>{var o=_("funded");n(s,o)},s=>{var o=_("repaid");n(s,o)}),t(b);var Da=r(b,2);p(Da,()=>a().isReadyForWithdrawal,s=>{var o=ne(),w=e(o);Va(w),B(),t(o),n(s,o)},s=>{var o=se(),w=e(o);t(o),g(()=>l(w,`${a().daysLeft??""} Days Left`)),n(s,o)}),t(Q);var Pa=r(Q,2);p(Pa,()=>!a().isRepayed&&!(a().phase=="repayment"&&a().daysLeft==0),s=>{var o=fe(),w=T(o);p(w,()=>a().isReadyForWithdrawal,f=>{var d=oe();B(2),n(f,d)},f=>{var d=ve(),k=r(T(d),2);p(k,()=>a().loanType=="Solofund",h=>{var i=de();n(h,i)},h=>{var i=ie();n(h,i)});var $=r(k,4),R=e($);p(R,()=>F(a()),h=>{var i=le();xa(i),g(()=>P(i,"placeholder",a().loanType=="Solofund"?a().fundingGoal:"")),ya(i,()=>a().fundingGoal,U=>a(a().fundingGoal=U,!0)),n(h,i)},h=>{var i=pe();xa(i),g(()=>P(i,"placeholder",a().loanType=="Solofund"?a().fundingGoal:"")),ya(i,()=>v(u),U=>aa(u,U)),n(h,i)});var ga=r(R,2),Ya=e(ga,!0);t(ga),t($),g(()=>l(Ya,a().fundingToken)),n(f,d)});var ma=r(w,2);p(ma,()=>a().isReadyForWithdrawal,f=>{var d=V(()=>a().creator!=G());ba(f,{onClick:A,get disabled(){return v(d)},label:"Withdraw loan",variant:"primary",w100:!0})},f=>{var d=V(()=>a().phase=="loan"?"Fund the loan":"Repay the loan"),k=V(()=>!F(a())&&(!v(u)||a().daysLeft==0));ba(f,{onClick:A,get label(){return v(d)},variant:"primary",get disabled(){return v(k)},w100:!0})});var ca=r(ma,2),_a=r(e(ca));p(_a,()=>a().isReadyForWithdrawal,f=>{var d=_("“Withdraw loan”");n(f,d)},f=>{var d=X(),k=T(d);p(k,()=>a().phase=="loan",$=>{var R=_("“Fund the loan”");n($,R)},$=>{var R=_("“Repay the loan”");n($,R)},!0),n(f,d)});var Ma=r(_a,2);P(Ma,"href",`${Xa??""}/tos`),B(),t(ca),n(s,o)}),t(va),t(S),g(()=>{l(Ia,a().loanTitle),l(Ca,a().loanType),l(Fa,a().loanDescription),l(Sa,a().repaymentPeriod),l(Ba,a().interestRate),l(Ga,`${a().fundingGoal??""} ${a().fundingToken??""}`),P(D,"style",`width: ${a().fundedPercentage??""}%`),L(D,"bg-gray-500",a().daysLeft==0||a().isRepayed),L(D,"bg-green-400",a().phase=="loan"&&a().daysLeft>0&&!a().isRepayed),L(D,"bg-indigo-600",a().phase=="repayment"&&a().daysLeft>0&&!a().isRepayed),L(b,"text-gray-500",a().daysLeft==0||a().isRepayed),L(b,"text-green-500",a().phase=="loan"&&a().daysLeft>0&&!a().isRepayed),L(b,"text-indigo-600",a().phase=="repayment"&&a().daysLeft>0&&!a().isRepayed),l(ua,`${a().fundedAmount??""} `)}),za("click",W,C),n(I,c),$a()}function Se(I,x){ka(x,!1);const j=Ra(),G=()=>ta(Za,"$page",j),a=()=>ta(Ka,"$repayments",j);let u=ea({}),C=ea();ha(()=>G(),()=>{aa(C,G().params.id)}),ha(()=>(a(),v(C)),()=>{aa(u,a().find(c=>c.loanId===v(C)))}),qa(),La();var F=X(),A=T(F);p(A,()=>v(u),c=>{me(c,{get loan(){return v(u)}})},c=>{var y=X(),W=T(y);p(W,()=>a().length>0,M=>{var S=_();g(()=>l(S,`${a().length??""}
	Loan not found.`)),n(M,S)},null,!0),n(c,y)}),n(I,F),$a()}export{Se as component,We as universal};
