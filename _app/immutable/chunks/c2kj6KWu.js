import{b as y,B as _,a as b,C as d,h as o,w as E,E as T,H as m,z as A,v as R,A as v,c as w,aw as N,R as S,n as g,$ as x,a6 as C}from"./DDT3yhNO.js";import{s as F}from"./DugjElLw.js";function q(e,n,a,s=null,u=!1){o&&E();var r=e,i=null,t=null,f=null,h=u?T:0;y(()=>{if(f===(f=!!n()))return;let c=!1;if(o){const p=r.data===m;f===p&&(r=A(),R(r),v(!1),c=!0)}f?(i?_(i):i=b(()=>a(r)),t&&d(t,()=>{t=null})):(t?_(t):s&&(t=b(()=>s(r))),i&&d(i,()=>{i=null})),c&&v(!0)},h),o&&(r=w)}let l=!1;function z(e,n,a){const s=a[n]??(a[n]={store:null,source:S(void 0),unsubscribe:g});if(s.store!==e)if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=g;else{var u=!0;s.unsubscribe=F(e,r=>{u?s.source.v=r:C(s.source,r)}),u=!1}return x(s.source)}function B(){const e={};return N(()=>{for(var n in e)e[n].unsubscribe()}),e}function D(e){var n=l;try{return l=!1,[e(),l]}finally{l=n}}export{z as a,D as c,q as i,B as s};
